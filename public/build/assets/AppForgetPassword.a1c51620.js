import{u as E,r as $,_ as S,a as p,o as f,c as v,b as e,e as C,f as k,d as i,w as u,m as _,g as b,h as M,i as T,j as y}from"./app.99542f7f.js";import{F as R,a as q,E as A,A as L,c as F,b as h,u as V,d as j}from"./logo.eb15b55a.js";import{C as z}from"./vue-select.bb4cb945.js";const B={name:"AppLoginForm",components:{Field:R,Form:q,ErrorMessage:A,AppLoader:L},emits:["close","switchReg","forget"],setup(){const n=E(),s=$(!1),m=F({email:h().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-mail").email("\u041D\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 E-mail"),password:h().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C").min(8,"\u041F\u0430\u0440\u043E\u043B\u044C \u043E\u0442 8 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432")});return{login:d=>{s.value=!0,n.dispatch("auth/login",d),s.value=!1},validationSchema:m,loading:s}}},N={class:"modal"},W={class:"modal-container"},x=e("h2",null,"\u0412\u0445\u043E\u0434",-1),I={class:"form-control"},P={class:"form-control"},K=e("button",{class:"btn btn-default btn-home"},"\u0412\u043E\u0439\u0442\u0438",-1),O={class:"form-info jcc"},U={class:"form-info jcc"};function D(n,s,m,o,d,g){const r=p("AppLoader"),l=p("Field"),t=p("ErrorMessage"),a=p("Form");return f(),v("div",N,[e("div",{class:"modal-background",onClick:s[0]||(s[0]=c=>{n.$emit("close")})}),e("div",W,[o.loading?(f(),C(r,{key:0})):k("",!0),e("div",{class:"close",onClick:s[1]||(s[1]=c=>{n.$emit("close")})}),x,i(a,{onSubmit:o.login,class:"home-form","validation-schema":o.validationSchema},{default:u(()=>[e("div",I,[i(l,{name:"email"},{default:u(({field:c,errors:w})=>[e("input",_(c,{type:"email",class:["form-input",{invalid:!!w.length}],placeholder:"E-mail"}),null,16)]),_:1}),i(t,{class:"alert",name:"email"})]),e("div",P,[i(l,{name:"password"},{default:u(({field:c,errors:w})=>[e("input",_(c,{type:"password",class:["form-input",{invalid:!!w.length}],placeholder:"\u041F\u0430\u0440\u043E\u043B\u044C"}),null,16)]),_:1}),i(t,{class:"alert",name:"password"})]),K,e("div",O,[b("\u041D\u0435\u0442 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430?\xA0"),e("span",{class:"underline link",onClick:s[2]||(s[2]=c=>{n.$emit("switchReg")})},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F")]),e("div",U,[b("\u0417\u0430\u0431\u044B\u043B \u043F\u0430\u0440\u043E\u043B\u044C?\xA0"),e("span",{class:"underline link",onClick:s[3]||(s[3]=c=>{n.$emit("forget")})},"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C")])]),_:1},8,["onSubmit","validation-schema"])])])}const Ce=S(B,[["render",D]]),G={name:"TheRegisterFormWizard",props:["validationSchema"],emits:["submitForm","switchReg"],components:{vSelect:z,Field:R,ErrorMessage:A},setup(n,{emit:s}){const m=E(),o=$(0),d=M(()=>n.validationSchema[o.value]),{values:g,handleSubmit:r}=V({validationSchema:d,keepValuesOnUnmount:!0}),l=async a=>{try{return(await axios.post("/api/email",{email:a.email})).data}catch(c){console.log(c.message)}};return{submit:r(async a=>{if(o.value===0)if(await l(a)===0){o.value++;return}else{m.dispatch("notification/displayMessage",{value:"Email \u0443\u0436\u0435 \u0437\u0430\u043D\u044F\u0442!",type:"error"});return}s("submitForm",a)}),step:o}}},H={class:"form-control"},J={class:"form-control"},Q={class:"form-control"},X=e("div",{class:"form-info mb15"},[b("\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u044F \u0444\u043E\u0440\u043C\u0443, \u0432\u044B \u0441\u043E\u0433\u043B\u0430\u0448\u0430\u0435\u0442\u0435\u0441\u044C \u043D\u0430 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0443 "),e("a",{class:"underline link",target:"_blank",href:"/page/privacy"},"\u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445")],-1),Y={class:"form-info jcc"},Z={key:1,class:"reg-step"},ee={class:"form-control"},se={class:"form-control"},oe={class:"form-control"},te=e("div",{class:"form-info mb15"},"\u0415\u0441\u043B\u0438 \u0432\u0430\u0448\u0435\u0433\u043E \u0443\u043D\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0430 \u043D\u0435\u0442, \u0442\u043E \u043F\u0440\u043E\u043F\u0443\u0441\u0442\u0435 \u044D\u0442\u043E \u043F\u043E\u043B\u0435",-1),ne=e("div",{class:"form-info mb15"},[b("\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u044F \u0444\u043E\u0440\u043C\u0443, \u0432\u044B \u0441\u043E\u0433\u043B\u0430\u0448\u0430\u0435\u0442\u0435\u0441\u044C \u043D\u0430 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0443 \xA0 "),e("a",{class:"underline link",target:"_blank",href:"/page/privacy"},"\u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445")],-1),ae=e("button",{class:"btn btn-default btn-home"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F",-1),ie={class:"form-info jcc"};function le(n,s,m,o,d,g){const r=p("Field"),l=p("ErrorMessage");return f(),v("form",{onSubmit:s[4]||(s[4]=(...t)=>o.submit&&o.submit(...t)),class:"home-form",autocomplete:"off"},[o.step===0?(f(),v("div",{key:0,class:"reg-step",onKeyup:s[2]||(s[2]=T((...t)=>o.submit&&o.submit(...t),["enter"]))},[e("div",H,[i(r,{name:"email"},{default:u(({field:t,errors:a})=>[e("input",_(t,{type:"email",class:["form-input",{invalid:!!a.length}],placeholder:"E-mail"}),null,16)]),_:1}),i(l,{class:"alert",name:"email"})]),e("div",J,[i(r,{name:"password"},{default:u(({field:t,errors:a})=>[e("input",_(t,{type:"password",class:["form-input",{invalid:!!a.length}],placeholder:"\u041F\u0430\u0440\u043E\u043B\u044C"}),null,16)]),_:1}),i(l,{class:"alert",name:"password"})]),e("div",Q,[i(r,{name:"password_confirmation"},{default:u(({field:t,errors:a})=>[e("input",_(t,{type:"password",class:["form-input",{invalid:!!a.length}],placeholder:"\u041F\u0430\u0440\u043E\u043B\u044C \u0435\u0449\u0435 \u0440\u0430\u0437"}),null,16)]),_:1}),i(l,{class:"alert",name:"password_confirmation"})]),X,e("div",{class:"btn btn-default btn-home",onClick:s[0]||(s[0]=(...t)=>o.submit&&o.submit(...t))},"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C (1 \u0438\u0437 2)"),e("div",Y,[b("\u0415\u0441\u0442\u044C \u0430\u043A\u043A\u0430\u0443\u043D\u0442?\xA0"),e("span",{class:"underline link",onClick:s[1]||(s[1]=t=>n.$emit("switchReg"))},"\u0412\u043E\u0439\u0442\u0438")])],32)):k("",!0),o.step===1?(f(),v("div",Z,[e("div",ee,[i(r,{name:"surname"},{default:u(({field:t,errors:a})=>[e("input",_(t,{type:"text",class:["form-input",{invalid:!!a.length}],placeholder:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"}),null,16)]),_:1}),i(l,{class:"alert",name:"surname"})]),e("div",se,[i(r,{name:"name"},{default:u(({field:t,errors:a})=>[e("input",_(t,{type:"text",class:["form-input",{invalid:!!a.length}],placeholder:"\u0418\u043C\u044F"}),null,16)]),_:1}),i(l,{class:"alert",name:"name"})]),e("div",oe,[i(r,{name:"nickname"},{default:u(({field:t,errors:a})=>[e("input",_(t,{type:"text",class:["form-input",{invalid:!!a.length}],placeholder:"\u041D\u0438\u043A\u043D\u0435\u0439\u043C \u0432 Virtual Regatta"}),null,16)]),_:1}),i(l,{class:"alert",name:"nickname"})]),te,ne,ae,e("div",ie,[e("span",{class:"underline link",onClick:s[3]||(s[3]=t=>o.step=0)},"\u0412\u0435\u0440\u043D\u0443\u0442\u044C\u0441\u044F \u043D\u0430\u0437\u0430\u0434 (2 \u0438\u0437 2)")])])):k("",!0)],32)}const re=S(G,[["render",le]]),ce={name:"AppRegisterForm",emits:["close","switchReg"],components:{TheRegisterFormWizard:re,AppLoader:L},setup(n,{emit:s}){const m=$(0),o=E(),d=$(!1),g=[F({email:h().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-mail").email("\u041D\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 E-mail"),password:h().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C").min(8,"\u041F\u0430\u0440\u043E\u043B\u044C \u043E\u0442 8 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"),password_confirmation:h().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C").oneOf([j("password")],"\u041F\u0430\u0440\u043E\u043B\u0438 \u0434\u043E\u043B\u0436\u043D\u044B \u0441\u043E\u0432\u043F\u043E\u0434\u0430\u0442\u044C")}),F({surname:h().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043C\u0438\u043B\u0438\u044E").min(2,"\u041E\u0442 2-\u0445 \u0441\u0438\u043C\u0432\u043E\u0432\u043E\u043B\u043E\u0432"),name:h().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F").min(2,"\u041E\u0442 2-\u0445 \u0441\u0438\u043C\u0432\u043E\u0432\u043E\u043B\u043E\u0432"),nickname:h().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0438\u043A\u043D\u0435\u0439\u043C").min(2)})];return{register:async t=>{try{d.value=!0,await y.get("/sanctum/csrf-cookie"),await y.post("/register",t),o.dispatch("auth/login",{email:t.email,password:t.password})}catch(a){console.log(a.message),o.dispatch("notification/displayMessage",{value:"\u041E\u0448\u0438\u0431\u043A\u0430! \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0432\u0432\u0435\u0441\u0442\u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0438\u043B\u0438 \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443",type:"error"}),d.value=!1}},step:m,loading:d,schema:g,switchToLogIn:()=>{s("switchReg")}}}},me={class:"modal"},de={class:"modal-container"},pe=e("h2",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F",-1),ue=e("div",{class:"reg-info form-info"},[b(" \u0423 \u0432\u0430\u0441 \u0434\u043E\u043B\u0436\u0435\u043D \u0431\u044B\u0442\u044C \u0430\u043A\u043A\u0430\u0443\u043D\u0442 \u0432 Virtual Regatta, \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u043C\u043E\u0436\u043D\u043E \u2013 "),e("a",{class:"underline link",href:"https://www.virtualregatta.com/en/inshore-game/",target:"_blank"},"\u0437\u0434\u0435\u0441\u044C")],-1);function fe(n,s,m,o,d,g){const r=p("AppLoader"),l=p("TheRegisterFormWizard");return f(),v("div",me,[e("div",{class:"modal-background",onClick:s[0]||(s[0]=t=>{n.$emit("close")})}),e("div",de,[e("div",{class:"close",onClick:s[1]||(s[1]=t=>{n.$emit("close")})}),o.loading?(f(),C(r,{key:0})):k("",!0),pe,ue,i(l,{"validation-schema":o.schema,onSubmitForm:o.register,onSwitchReg:o.switchToLogIn},null,8,["validation-schema","onSubmitForm","onSwitchReg"])])])}const Re=S(ce,[["render",fe]]),_e={name:"AppForgetPassword",components:{Field:R,Form:q,ErrorMessage:A,AppLoader:L},emits:["close","change"],setup(){E();const n=$(!1),s=F({email:h().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-mail").email("\u041D\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 E-mail")}),m=$(!1);return{validationSchema:s,loading:n,reset:async d=>{n.value=!0;try{await y.get("/sanctum/csrf-cookie"),await y.post("/forgot-password",{email:d.email}),m.value="\u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0441\u0432\u043E\u044E \u043F\u043E\u0447\u0442\u0443!"}catch(g){console.log(g.message)}n.value=!1,m.value=!0},msg:m}}},he={class:"modal"},ge={class:"modal-container"},ve={key:1,class:"loading-overlay"},be=e("h2",null,"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C",-1),$e={class:"form-control"},ke=e("button",{class:"btn btn-default btn-home"},"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C",-1),we={class:"form-info jcc"};function ye(n,s,m,o,d,g){const r=p("AppLoader"),l=p("Field"),t=p("ErrorMessage"),a=p("Form");return f(),v("div",he,[e("div",{class:"modal-background",onClick:s[0]||(s[0]=c=>{n.$emit("close")})}),e("div",ge,[e("div",{class:"close",onClick:s[1]||(s[1]=c=>{n.$emit("close")})}),o.loading?(f(),C(r,{key:0})):k("",!0),o.msg?(f(),v("div",ve," \u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0441\u0432\u043E\u044E \u043F\u043E\u0447\u0442\u0443 ")):k("",!0),be,i(a,{onSubmit:o.reset,class:"home-form","validation-schema":o.validationSchema},{default:u(()=>[e("div",$e,[i(l,{name:"email"},{default:u(({field:c,errors:w})=>[e("input",_(c,{type:"email",class:["form-input",{invalid:!!w.length}],placeholder:"E-mail"}),null,16)]),_:1}),i(t,{class:"alert",name:"email"})]),ke,e("div",we,[b("\u0412\u0435\u0440\u043D\u0443\u0442\u044C\u0441\u044F \u043E\u0431\u0440\u0430\u0442\u043D\u043E\xA0"),e("span",{class:"underline link",onClick:s[2]||(s[2]=c=>{n.$emit("change")})},"\u0412\u043E\u0439\u0442\u0438")])]),_:1},8,["onSubmit","validation-schema"])])])}const Ae=S(_e,[["render",ye]]);export{Ce as A,Re as a,Ae as b};
