import{u as A,j as $,_ as f,r as _,x as b,G as w,a as u,o as a,c as o,e as y,f as h,b as s,d as v,w as x,g as p,Q as l,V as D,P as S,F as k}from"./app.e959e466.js";import{F as se,a as te,E as ae,c as oe,b as ne,A as C}from"./logo.4abce9f2.js";import{t as M}from"./time.025744ef.js";import{A as B}from"./AppHeader.e20ac1c6.js";const F={name:"AppDashStages",components:{AppLoader:C},props:["stage"],setup(n){const t=()=>{const i=new Date().toLocaleString("ru-RU",{timeZone:"Europe/Moscow"}).split(",");m.value=`${i[0]} ${i[1]}`},r=A(),e=_(n.stage),c=_(!1),m=_();b(()=>{t()});const d=setInterval(t,1e3);return w(()=>{clearInterval(d)}),{stage:e,loading:c,time:M,toggleReg:async()=>{c.value=!0;try{e.value.users_exists?(await axios.post(`/api/stage/${e.value.id}/cancel`),e.value.users_exists=!1,r.dispatch("notification/displayMessage",{value:"\u0412\u044B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0442\u043A\u0430\u0437\u0430\u043B\u0438\u0441\u044C \u043E\u0442 \u0443\u0447\u0430\u0441\u0442\u0438\u0435 \u0432 \u0440\u0435\u0433\u0430\u0442\u0435",type:"primary"})):(await axios.post(`/api/stage/${e.value.id}/accept`),e.value.users_exists=!0,r.dispatch("notification/displayMessage",{value:"\u0412\u044B \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u044B \u043D\u0430 \u0440\u0435\u0433\u0430\u0442\u0443",type:"primary"}))}catch(i){console.log(i.message),r.dispatch("notification/displayMessage",{value:i.response.data.message,type:"error"})}c.value=!1},now:m}}},I={class:"dash-stage"},L={class:"dash-stage__header"},R={class:"dash-stage__tournament"},V={key:0,class:"user-stage__participant"},E={class:"dash-stage__date"},N={key:1,class:"btn btn-disable btn-settings-280"},T={key:2,class:"btn btn-disable btn-settings-280"},U={key:4,class:"btn btn-disable btn-settings-280"};function j(n,t,r,e,c,m){const d=u("AppLoader"),g=u("router-link");return a(),o("div",I,[e.loading?(a(),y(d,{key:0})):h("",!0),s("div",L,[v(g,{to:`/dashboard/stage/${e.stage.id}`,class:"dash-stage__title"},{default:x(()=>[p(l(e.stage.title),1)]),_:1},8,["to"]),s("div",R,l(e.stage.tournament),1),e.stage.users_exists?(a(),o("div",V,"\u0412\u044B \u0443\u0447\u0430\u0441\u0442\u0432\u0443\u0435\u0442\u0435")):h("",!0)]),s("div",E,[s("span",null,"\u041D\u0430\u0447\u0430\u043B\u043E \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438: "+l(e.time(e.stage.register_start)),1),s("span",null,"\u041E\u043A\u043E\u043D\u0447\u0430\u043D\u0438\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438: "+l(e.time(e.stage.register_end)),1),s("span",null,"\u041D\u0430\u0447\u0430\u043B\u043E \u0433\u043E\u043D\u043E\u043A: "+l(e.time(e.stage.race_start)),1)]),e.time(e.stage.register_start)>e.now?(a(),o("div",N," \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F \u043D\u0435 \u043D\u0430\u0447\u0430\u043B\u0430\u0441\u044C ")):e.time(e.stage.race_start)<e.now&&e.stage.status!=="finished"?(a(),o("div",T," \u0420\u0435\u0433\u0430\u0442\u0430 \u043F\u0440\u043E\u0445\u043E\u0434\u0438\u0442 ")):e.stage.status==="active"&&e.time(e.stage.register_end)>e.now?(a(),o("div",{key:3,class:D(["btn","btn-settings-280",{"btn-default":!e.stage.users_exists},{"btn-border":e.stage.users_exists}]),onClick:t[0]||(t[0]=(...i)=>e.toggleReg&&e.toggleReg(...i))},l(e.stage.users_exists?"\u041E\u0442\u043A\u0430\u0437\u0430\u0442\u044C\u0441\u044F \u043E\u0442 \u0443\u0447\u0430\u0441\u0442\u0438\u044F":"\u041F\u0440\u0438\u043D\u044F\u0442\u044C \u0443\u0447\u0430\u0441\u0442\u0438\u0435"),3)):(a(),o("div",U,"\u041E\u0436\u0438\u0434\u0430\u0439\u0442\u0435"))])}const q=f(F,[["render",j]]),z={name:"AppDashActualStages",components:{AppDashStages:q},setup(){const n=_();return b(async()=>{try{const t=await axios.get("/api/stage/actual/dashboard");n.value=t.data}catch(t){console.log(t.message)}}),{stages:n}}};function G(n,t,r,e,c,m){const d=u("AppDashStages");return a(!0),o(k,null,S(e.stages,g=>(a(),y(d,{key:g.id,stage:g},null,8,["stage"]))),128)}const H=f(z,[["render",G]]);const P={class:"container-fluid g-0"},Q={class:"row"},Z={key:0,class:"col-12"},J=s("a",{target:"_blank",href:"https://t.me/chirkovka"},"\u0441\u044E\u0434\u0430",-1),K={class:"col-lg-12"},O={class:"dashboard-item"},W=s("h3",null,"\u0410\u043A\u0442\u0443\u0430\u043B\u044C\u043D\u044B\u0435 \u0433\u043E\u043D\u043A\u0438",-1),X={class:"dash-stage__container"},ce={__name:"Dashboard",setup(n){const t=_(!!localStorage.getItem("greeting")),r=()=>{localStorage.setItem("greeting",!0),t.value=!0};return(e,c)=>(a(),o(k,null,[v(B,null,{default:x(()=>[p("\u041B\u0438\u0447\u043D\u044B\u0439 \u043A\u0430\u0431\u0438\u043D\u0435\u0442")]),_:1}),s("main",null,[s("div",P,[s("div",Q,[t.value?h("",!0):(a(),o("div",Z,[s("div",{class:"dashboard-item greeting"},[p(" \u041F\u0440\u0438\u0432\u0435\u0442! \u0420\u0430\u0434\u044B \u0432\u0438\u0434\u0435\u0442\u044C \u0442\u0435\u0431\u044F \u043D\u0430 \u043D\u0430\u0448\u0435\u043C \u0441\u0430\u0439\u0442\u0435 :) \u0412\u0441\u044F \u0441\u0438\u0441\u0442\u0435\u043C\u0430 \u043D\u0430\u0445\u043E\u0434\u0438\u0442\u0441\u044F \u043D\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u043A\u0438 \u0438 \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F, \u0438 \u043D\u0430\u043C \u043E\u0447\u0435\u043D\u044C \u0432\u0430\u0436\u043D\u043E \u0437\u043D\u0430\u0442\u044C, \u0447\u0442\u043E \u043D\u0430 \u0434\u0430\u043D\u043D\u043E\u043C \u044D\u0442\u0430\u043F\u0435 \u0432\u0441\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442 \u043A\u0430\u043A \u043D\u0430\u0434\u043E. \u0415\u0441\u043B\u0438 \u0442\u044B \u043D\u0430\u0439\u0434\u0435\u0448\u044C \u043E\u0448\u0438\u0431\u043A\u0438 \u0438\u043B\u0438 \u0431\u0443\u0434\u0443\u0442 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F \u2014 \u0441\u043C\u0435\u043B\u043E \u043F\u0438\u0448\u0438 \u043F\u043E \u043A\u043D\u043E\u043F\u043A\u0435 \u0432 \u043F\u0440\u0430\u0432\u043E\u043C-\u0432\u0435\u0440\u0445\u043D\u0435\u043C \u0443\u0433\u043B\u0443. \u041B\u044E\u0431\u044B\u0435 \u0432\u043E\u043F\u0440\u043E\u0441\u044B \u043C\u043E\u0436\u0435\u0448\u044C \u0437\u0430\u0434\u0430\u0432\u0430\u0442\u044C "),J,p(". "),s("div",{class:"btn btn-default btn-settings",onClick:r},"\u041F\u043E\u043D\u044F\u0442\u043D\u043E")])])),s("div",K,[s("div",O,[W,s("div",X,[v(H)])])])])])])],64))}};export{ce as default};
