import{u as S,r as h,_ as A,a as d,o as u,c as w,b as o,e as $,f as k,d as a,w as g,m as f,g as y,h as C,i as j,j as V,k as P,K as q}from"./app.08e4a853.js";import{F as R,a as T,E,A as L,c as F,b,u as U,d as x,_ as z}from"./logo.170de005.js";import{C as B}from"./vue-select.f1a525a5.js";const H={name:"AppLoginForm",components:{Field:R,Form:T,ErrorMessage:E,AppLoader:L},emits:["close","switchReg","forget"],setup(){const t=S(),e=h(!1),l=F({email:b().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-mail").email("\u041D\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 E-mail"),password:b().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C").min(8,"\u041F\u0430\u0440\u043E\u043B\u044C \u043E\u0442 8 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432")});return{login:p=>{e.value=!0,t.dispatch("auth/login",p),e.value=!1},validationSchema:l,loading:e}}},K={class:"modal"},N={class:"modal-container"},W=o("h2",null,"\u0412\u0445\u043E\u0434",-1),I={class:"form-control"},O={class:"form-control"},D=o("button",{class:"btn btn-default btn-home"},"\u0412\u043E\u0439\u0442\u0438",-1),G={class:"form-info jcc"},J={class:"form-info jcc"};function Q(t,e,l,s,p,v){const c=d("AppLoader"),m=d("Field"),r=d("ErrorMessage"),i=d("Form");return u(),w("div",K,[o("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>{t.$emit("close")})}),o("div",N,[s.loading?(u(),$(c,{key:0})):k("",!0),o("div",{class:"close",onClick:e[1]||(e[1]=n=>{t.$emit("close")})}),W,a(i,{onSubmit:s.login,class:"home-form","validation-schema":s.validationSchema},{default:g(()=>[o("div",I,[a(m,{name:"email"},{default:g(({field:n,errors:_})=>[o("input",f(n,{type:"email",class:["form-input",{invalid:!!_.length}],placeholder:"E-mail"}),null,16)]),_:1}),a(r,{class:"alert",name:"email"})]),o("div",O,[a(m,{name:"password"},{default:g(({field:n,errors:_})=>[o("input",f(n,{type:"password",class:["form-input",{invalid:!!_.length}],placeholder:"\u041F\u0430\u0440\u043E\u043B\u044C"}),null,16)]),_:1}),a(r,{class:"alert",name:"password"})]),D,o("div",G,[y("\u041D\u0435\u0442 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430?\xA0"),o("span",{class:"underline link",onClick:e[2]||(e[2]=n=>{t.$emit("switchReg")})},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F")]),o("div",J,[y("\u0417\u0430\u0431\u044B\u043B \u043F\u0430\u0440\u043E\u043B\u044C?\xA0"),o("span",{class:"underline link",onClick:e[3]||(e[3]=n=>{t.$emit("forget")})},"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C")])]),_:1},8,["onSubmit","validation-schema"])])])}const X=A(H,[["render",Q]]);function Y(){const t=h();return{universities:t,getUniversities:async()=>{try{const l=await C.get("/api/universities");t.value=l.data}catch(l){console.log(l.message)}}}}const Z={name:"TheRegisterFormWizard",props:["validationSchema"],emits:["submitForm","switchReg"],components:{vSelect:B,Field:R,ErrorMessage:E},setup(t,{emit:e}){const l=S(),s=h(0),{universities:p,getUniversities:v}=Y();j(async()=>{v()});const c=V(()=>t.validationSchema[s.value]),{values:m,handleSubmit:r}=U({validationSchema:c,keepValuesOnUnmount:!0}),i=async _=>{try{return(await axios.post("/api/email",{email:_.email})).data}catch(M){console.log(M.message)}},n=r(async _=>{if(s.value===0)if(await i(_)===0){s.value++;return}else{l.dispatch("notification/displayMessage",{value:"Email \u0443\u0436\u0435 \u0437\u0430\u043D\u044F\u0442!",type:"error"});return}e("submitForm",_)});return{universities:p,submit:n,step:s}}},ee={class:"form-control"},oe={class:"form-control"},se={class:"form-control"},ne={class:"form-info mb15"},te={class:"form-info jcc"},ie={key:1,class:"reg-step"},ae={class:"form-control"},le={class:"form-control"},re={class:"form-control"},ce={class:"form-control"},me=o("div",{class:"form-info mb15"},"\u0415\u0441\u043B\u0438 \u0432\u0430\u0448\u0435\u0433\u043E \u0443\u043D\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0430 \u043D\u0435\u0442, \u0442\u043E \u043F\u0440\u043E\u043F\u0443\u0441\u0442\u0435 \u044D\u0442\u043E \u043F\u043E\u043B\u0435",-1),de={class:"form-info mb15"},ue=o("button",{class:"btn btn-default btn-home"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F",-1),pe={class:"form-info jcc"};function ge(t,e,l,s,p,v){const c=d("Field"),m=d("ErrorMessage"),r=d("v-select");return u(),w("form",{onSubmit:e[6]||(e[6]=(...i)=>s.submit&&s.submit(...i)),class:"home-form",autocomplete:"off"},[s.step===0?(u(),w("div",{key:0,class:"reg-step",onKeyup:e[3]||(e[3]=P((...i)=>s.submit&&s.submit(...i),["enter"]))},[o("div",ee,[a(c,{name:"email"},{default:g(({field:i,errors:n})=>[o("input",f(i,{type:"email",class:["form-input",{invalid:!!n.length}],placeholder:"E-mail"}),null,16)]),_:1}),a(m,{class:"alert",name:"email"})]),o("div",oe,[a(c,{name:"password"},{default:g(({field:i,errors:n})=>[o("input",f(i,{type:"password",class:["form-input",{invalid:!!n.length}],placeholder:"\u041F\u0430\u0440\u043E\u043B\u044C"}),null,16)]),_:1}),a(m,{class:"alert",name:"password"})]),o("div",se,[a(c,{name:"password_confirmation"},{default:g(({field:i,errors:n})=>[o("input",f(i,{type:"password",class:["form-input",{invalid:!!n.length}],placeholder:"\u041F\u0430\u0440\u043E\u043B\u044C \u0435\u0449\u0435 \u0440\u0430\u0437"}),null,16)]),_:1}),a(m,{class:"alert",name:"password_confirmation"})]),o("div",ne,[y("\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u044F \u0444\u043E\u0440\u043C\u0443, \u0432\u044B \u0441\u043E\u0433\u043B\u0430\u0448\u0430\u0435\u0442\u0435\u0441\u044C \u043D\u0430 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0443 "),o("span",{class:"underline link",onClick:e[0]||(e[0]=()=>{})},"\u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445")]),o("div",{class:"btn btn-default btn-home",onClick:e[1]||(e[1]=(...i)=>s.submit&&s.submit(...i))},"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C (1 \u0438\u0437 2)"),o("div",te,[y("\u0415\u0441\u0442\u044C \u0430\u043A\u043A\u0430\u0443\u043D\u0442?\xA0"),o("span",{class:"underline link",onClick:e[2]||(e[2]=i=>t.$emit("switchReg"))},"\u0412\u043E\u0439\u0442\u0438")])],32)):k("",!0),s.step===1?(u(),w("div",ie,[o("div",ae,[a(c,{name:"surname"},{default:g(({field:i,errors:n})=>[o("input",f(i,{type:"text",class:["form-input",{invalid:!!n.length}],placeholder:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"}),null,16)]),_:1}),a(m,{class:"alert",name:"surname"})]),o("div",le,[a(c,{name:"name"},{default:g(({field:i,errors:n})=>[o("input",f(i,{type:"text",class:["form-input",{invalid:!!n.length}],placeholder:"\u0418\u043C\u044F"}),null,16)]),_:1}),a(m,{class:"alert",name:"name"})]),o("div",re,[a(c,{name:"nickname"},{default:g(({field:i,errors:n})=>[o("input",f(i,{type:"text",class:["form-input",{invalid:!!n.length}],placeholder:"\u041D\u0438\u043A\u043D\u0435\u0439\u043C \u0432 Virtual Regatta"}),null,16)]),_:1}),a(m,{class:"alert",name:"nickname"})]),o("div",ce,[a(c,{name:"university_id"},{default:g(({field:i})=>[a(r,f({options:s.universities,placeholder:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0443\u043D\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442"},i),null,16,["options"]),a(m,{class:"alert",name:"university_id"})]),_:1})]),me,o("div",de,[y("\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u044F \u0444\u043E\u0440\u043C\u0443, \u0432\u044B \u0441\u043E\u0433\u043B\u0430\u0448\u0430\u0435\u0442\u0435\u0441\u044C \u043D\u0430 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0443 \xA0 "),o("span",{class:"underline link",onClick:e[4]||(e[4]=()=>{})},"\u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445")]),ue,o("div",pe,[o("span",{class:"underline link",onClick:e[5]||(e[5]=i=>s.step=0)},"\u0412\u0435\u0440\u043D\u0443\u0442\u044C\u0441\u044F \u043D\u0430\u0437\u0430\u0434 (2 \u0438\u0437 2)")])])):k("",!0)],32)}const ve=A(Z,[["render",ge]]),_e={name:"AppRegisterForm",emits:["close","switchReg"],components:{TheRegisterFormWizard:ve,AppLoader:L},setup(t,{emit:e}){const l=h(0),s=S(),p=h(!1),v=[F({email:b().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-mail").email("\u041D\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 E-mail"),password:b().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C").min(8,"\u041F\u0430\u0440\u043E\u043B\u044C \u043E\u0442 8 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"),password_confirmation:b().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C").oneOf([x("password")],"\u041F\u0430\u0440\u043E\u043B\u0438 \u0434\u043E\u043B\u0436\u043D\u044B \u0441\u043E\u0432\u043F\u043E\u0434\u0430\u0442\u044C")}),F({surname:b().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043C\u0438\u043B\u0438\u044E").min(2,"\u041E\u0442 2-\u0445 \u0441\u0438\u043C\u0432\u043E\u0432\u043E\u043B\u043E\u0432"),name:b().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F").min(2,"\u041E\u0442 2-\u0445 \u0441\u0438\u043C\u0432\u043E\u0432\u043E\u043B\u043E\u0432"),nickname:b().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0438\u043A\u043D\u0435\u0439\u043C").min(2),university_id:F().nullable()})];return{register:async r=>{try{p.value=!0,await C.get("/sanctum/csrf-cookie"),r.university_id=r.university_id?r.university_id.code:null,await C.post("/register",r),s.dispatch("auth/login",{email:r.email,password:r.password})}catch(i){console.log(i.message),s.dispatch("notification/displayMessage",{value:"\u041E\u0448\u0438\u0431\u043A\u0430! \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0432\u0432\u0435\u0441\u0442\u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0438\u043B\u0438 \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443",type:"error"}),p.value=!1}},step:l,loading:p,schema:v,switchToLogIn:()=>{e("switchReg")}}}},fe={class:"modal"},he={class:"modal-container"},be=o("h2",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F",-1),ke=o("div",{class:"reg-info form-info"},[y(" \u0423 \u0432\u0430\u0441 \u0434\u043E\u043B\u0436\u0435\u043D \u0431\u044B\u0442\u044C \u0430\u043A\u043A\u0430\u0443\u043D\u0442 \u0432 Virtual Regatta, \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u043C\u043E\u0436\u043D\u043E \u2013 "),o("a",{class:"underline link",href:"https://www.virtualregatta.com/en/inshore-game/",target:"_blank"},"\u0437\u0434\u0435\u0441\u044C")],-1);function $e(t,e,l,s,p,v){const c=d("AppLoader"),m=d("TheRegisterFormWizard");return u(),w("div",fe,[o("div",{class:"modal-background",onClick:e[0]||(e[0]=r=>{t.$emit("close")})}),o("div",he,[o("div",{class:"close",onClick:e[1]||(e[1]=r=>{t.$emit("close")})}),s.loading?(u(),$(c,{key:0})):k("",!0),be,ke,a(m,{"validation-schema":s.schema,onSubmitForm:s.register,onSwitchReg:s.switchToLogIn},null,8,["validation-schema","onSubmitForm","onSwitchReg"])])])}const we=A(_e,[["render",$e]]),ye={name:"AppForgetPassword",components:{Field:R,Form:T,ErrorMessage:E,AppLoader:L},emits:["close","change"],setup(){S();const t=h(!1),e=F({email:b().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-mail").email("\u041D\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 E-mail")}),l=h(!1);return{validationSchema:e,loading:t,reset:async p=>{t.value=!0;try{await C.get("/sanctum/csrf-cookie"),await C.post("/forgot-password",{email:p.email}),l.value="\u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0441\u0432\u043E\u044E \u043F\u043E\u0447\u0442\u0443!"}catch(v){console.log(v.message)}t.value=!1,l.value=!0},msg:l}}},Fe={class:"modal"},Ce={class:"modal-container"},Ae={key:1,class:"loading-overlay"},Se=o("h2",null,"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C",-1),Re={class:"form-control"},Ee=o("button",{class:"btn btn-default btn-home"},"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C",-1),Le={class:"form-info jcc"};function Me(t,e,l,s,p,v){const c=d("AppLoader"),m=d("Field"),r=d("ErrorMessage"),i=d("Form");return u(),w("div",Fe,[o("div",{class:"modal-background",onClick:e[0]||(e[0]=n=>{t.$emit("close")})}),o("div",Ce,[o("div",{class:"close",onClick:e[1]||(e[1]=n=>{t.$emit("close")})}),s.loading?(u(),$(c,{key:0})):k("",!0),s.msg?(u(),w("div",Ae," \u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0441\u0432\u043E\u044E \u043F\u043E\u0447\u0442\u0443 ")):k("",!0),Se,a(i,{onSubmit:s.reset,class:"home-form","validation-schema":s.validationSchema},{default:g(()=>[o("div",Re,[a(m,{name:"email"},{default:g(({field:n,errors:_})=>[o("input",f(n,{type:"email",class:["form-input",{invalid:!!_.length}],placeholder:"E-mail"}),null,16)]),_:1}),a(r,{class:"alert",name:"email"})]),Ee,o("div",Le,[y("\u0412\u0435\u0440\u043D\u0443\u0442\u044C\u0441\u044F \u043E\u0431\u0440\u0430\u0442\u043D\u043E\xA0"),o("span",{class:"underline link",onClick:e[2]||(e[2]=n=>{t.$emit("change")})},"\u0412\u043E\u0439\u0442\u0438")])]),_:1},8,["onSubmit","validation-schema"])])])}const qe=A(ye,[["render",Me]]),Te={name:"AppHomeHeader",components:{AppLoginForm:X,AppRegisterForm:we,AppForgetPassword:qe},setup(){const t=h(!1),e=h(!1),l=h(!1);return{login:t,register:e,changeModal:()=>{t.value=!t.value,e.value=!e.value},forget:l,toggleForget:()=>{t.value=!t.value,l.value=!l.value}}}},je={class:"container"},Ve={class:"row aic"},Pe={class:"col-6"},Ue=o("img",{src:z,alt:"vrisc logo",class:"logo"},null,-1),xe={class:"col-6 jcfe"};function ze(t,e,l,s,p,v){const c=d("router-link"),m=d("AppLoginForm"),r=d("AppForgetPassword"),i=d("AppRegisterForm");return u(),w("header",null,[o("div",je,[o("div",Ve,[o("div",Pe,[a(c,{to:"/"},{default:g(()=>[Ue]),_:1})]),o("div",xe,[o("div",{class:"login-btn btn btn-border",onClick:e[0]||(e[0]=n=>s.login=!0)},"\u0412\u0445\u043E\u0434"),o("div",{class:"register-btn btn btn-default",onClick:e[1]||(e[1]=n=>s.register=!0)},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F")])])]),s.login?(u(),$(m,{key:0,onClose:e[2]||(e[2]=n=>s.login=!1),onSwitchReg:s.changeModal,onForget:e[3]||(e[3]=n=>s.toggleForget())},null,8,["onSwitchReg"])):k("",!0),(u(),$(q,null,[s.forget?(u(),$(r,{key:0,onClose:e[4]||(e[4]=n=>s.forget=!1),onChange:e[5]||(e[5]=n=>s.toggleForget())})):k("",!0)],1024)),(u(),$(q,null,[s.register?(u(),$(i,{key:0,onClose:e[6]||(e[6]=n=>s.register=!1),onSwitchReg:s.changeModal},null,8,["onSwitchReg"])):k("",!0)],1024))])}const Ne=A(Te,[["render",ze]]);export{X as A,we as a,qe as b,Ne as c};
