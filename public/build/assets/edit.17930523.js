import{_ as M,X as E,u as L,r as n,a as c,o as p,c as A,e as V,f as k,b as t,S as _,Z as f,d as g,U as B,j as x,x as H,w as S,F as U,P as F,g as T,Q as b}from"./app.e959e466.js";import{A as I}from"./logo.4abce9f2.js";import{A as N}from"./AppEditor.cd5a2964.js";import{A as j}from"./AppHeader.e20ac1c6.js";import{t as D}from"./time.025744ef.js";const P={name:"AppStageCreate",components:{AppLoader:I,AppEditor:N},emits:["create"],setup(h,{emit:s}){const u=E(),e=L(),d=u.params.id,r=n(""),l=n(""),i=n(""),a=n(""),m=n(""),v=n(""),o=n(!1),y=n(null),w=n(null);return{register_start:r,register_end:l,race_start:i,title:a,excerpt:m,description:v,submit:async()=>{o.value=!0;try{const C=await x.post("/api/admin/stage/store",{tournament_id:d,register_start:r.value,register_end:l.value,race_start:i.value,title:a.value,excerpt:m.value,description:v.value});s("create",C.data),e.dispatch("notification/displayMessage",{value:"\u042D\u0442\u0430\u043F \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D\u0430",type:"primary"}),r.value=l.value=i.value=a.value="",y.value.clear(),w.value.clear(),o.value=!1}catch{e.dispatch("notification/displayMessage",{value:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0438 \u044D\u0442\u0430\u043F\u0430",type:"error"}),o.value=!1}},loading:o,excerptInput:y,descriptionInput:w}}},Q=t("h3",null,"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u044D\u0442\u0430\u043F\u0430",-1),R={class:"form-control"},X=t("label",{for:"register_start"},"\u041D\u0430\u0447\u0430\u043B\u043E \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",-1),Z={class:"form-control"},q=t("label",{for:"register_end"},"\u041A\u043E\u043D\u0435\u0446 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",-1),z={class:"form-control"},G=t("label",{for:"race_start"},"\u041D\u0430\u0447\u0430\u043B\u043E \u0433\u043E\u043D\u043E\u043A",-1),J={class:"form-control"},K=t("label",{for:"title"},"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",-1),O={class:"form-control"},W=t("label",{for:"title"},"\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",-1),Y={class:"form-control"},$=t("label",{for:"title"},"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",-1);function tt(h,s,u,e,d,r){const l=c("AppLoader"),i=c("AppEditor");return p(),A("form",null,[e.loading?(p(),V(l,{key:0})):k("",!0),Q,t("div",R,[X,_(t("input",{class:"form-input",type:"datetime-local",id:"register_start","onUpdate:modelValue":s[0]||(s[0]=a=>e.register_start=a)},null,512),[[f,e.register_start]])]),t("div",Z,[q,_(t("input",{class:"form-input",type:"datetime-local",id:"register_end","onUpdate:modelValue":s[1]||(s[1]=a=>e.register_end=a)},null,512),[[f,e.register_end]])]),t("div",z,[G,_(t("input",{class:"form-input",type:"datetime-local",id:"race_start","onUpdate:modelValue":s[2]||(s[2]=a=>e.race_start=a)},null,512),[[f,e.race_start]])]),t("div",J,[K,_(t("input",{class:"form-input",type:"text",id:"title","onUpdate:modelValue":s[3]||(s[3]=a=>e.title=a),placeholder:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"},null,512),[[f,e.title]])]),t("div",O,[W,g(i,{modelValue:e.excerpt,"onUpdate:modelValue":s[4]||(s[4]=a=>e.excerpt=a),id:"excerpt",ref:"excerptInput"},null,8,["modelValue"])]),t("div",Y,[$,g(i,{modelValue:e.description,"onUpdate:modelValue":s[5]||(s[5]=a=>e.description=a),id:"description",ref:"descriptionInput"},null,8,["modelValue"])]),t("button",{class:"btn btn-default btn-settings",onClick:s[6]||(s[6]=B((...a)=>e.submit&&e.submit(...a),["prevent"]))},"\u0421\u043E\u0437\u0434\u0430\u0442\u044C")])}const et=M(P,[["render",tt]]),ot={name:"tournament.edit",components:{AppStageCreate:et,AppLoader:I,AppEditor:N,AppHeader:j},setup(){const h=E(),s=L(),u=n(),e=n(),d=n(),r=n(),l=n(!1),i=n(),a=h.params.id,m=o=>{i.value.unshift({id:o.id,race_start:o.race_start,title:o.title})};return H(async()=>{try{const o=await x.get(`/api/admin/tournament/${a}`);e.value=u.value=o.data.title,d.value=o.data.yacht,r.value=o.data.description?o.data.description:" ";const y=await x.get(`/api/admin/stage/${a}`);i.value=y.data}catch(o){console.log(o.message)}}),{submit:async()=>{l.value=!0;try{await x.patch(`/api/admin/tournament/${a}/update`,{title:e.value,yacht:d.value,description:r.value}),s.dispatch("notification/displayMessage",{value:"\u0421\u0435\u0440\u0438\u044F \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0430",type:"primary"})}catch(o){console.log(o.message),s.dispatch("notification/displayMessage",{value:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0438 \u0441\u0435\u0440\u0438\u0438",type:"error"})}l.value=!1},title:e,yacht:d,description:r,loading:l,stages:i,addStage:m,h1:u,time:D}}},st={class:"container-fluid g-0"},at={class:"row"},nt={class:"col-12"},it={class:"dashboard-item"},lt={class:"form-control"},rt=t("label",{for:"title"},"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0441\u0435\u0440\u0438\u0438",-1),dt={class:"form-control"},ct=t("label",{for:"yacht"},"\u0422\u0438\u043F \u043B\u043E\u0434\u043A\u0438",-1),pt={class:"form-control"},ut=t("label",{for:"description"},"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",-1),mt=t("button",{class:"btn btn-default btn-settings"},"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C",-1),_t={class:"col-12"},ft={class:"dashboard-item"},vt={class:"stage-title"},gt={class:"stage-yacht"},ht={class:"stage-time"},yt=t("div",{class:"btn btn-default btn-full-width"},"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435",-1);function bt(h,s,u,e,d,r){const l=c("AppHeader"),i=c("AppLoader"),a=c("AppEditor"),m=c("AppStageCreate"),v=c("router-link");return p(),A(U,null,[g(l,null,{default:S(()=>[T(b(e.h1),1)]),_:1}),t("main",null,[t("div",st,[t("div",at,[t("div",nt,[t("div",it,[e.loading?(p(),V(i,{key:0})):k("",!0),t("form",{onSubmit:s[3]||(s[3]=B((...o)=>e.submit&&e.submit(...o),["prevent"]))},[t("div",lt,[rt,_(t("input",{class:"form-input",type:"text",id:"title","onUpdate:modelValue":s[0]||(s[0]=o=>e.title=o),placeholder:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0441\u0435\u0440\u0438\u0438"},null,512),[[f,e.title]])]),t("div",dt,[ct,_(t("input",{class:"form-input",type:"text",id:"yacht","onUpdate:modelValue":s[1]||(s[1]=o=>e.yacht=o),placeholder:"\u0422\u0438\u043F \u043B\u043E\u0434\u043A\u0438"},null,512),[[f,e.yacht]])]),t("div",pt,[ut,e.description?(p(),V(a,{key:0,modelValue:e.description,"onUpdate:modelValue":s[2]||(s[2]=o=>e.description=o),id:"description"},null,8,["modelValue"])):k("",!0)]),mt],32)])]),t("div",_t,[t("div",ft,[g(m,{onCreate:e.addStage},null,8,["onCreate"])])]),(p(!0),A(U,null,F(e.stages,o=>(p(),A("div",{class:"col-lg-3 col-md-6",key:o.id},[g(v,{class:"stage-item",to:{name:"stage.edit",params:{id:o.id}}},{default:S(()=>[t("div",vt,b(o.title),1),t("div",gt,b(e.yacht),1),t("div",ht,b(e.time(o.race_start)),1),yt]),_:2},1032,["to"])]))),128))])])])],64)}const St=M(ot,[["render",bt]]);export{St as default};
